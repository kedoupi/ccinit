## Check Prompt

### 核心作用
系统性审视提示词（prompt）的结构、执行性、限制条件与反馈机制，发现歧义、信息分散或缺乏约束等问题，并给出改进建议。

### 适用场景
- 为 AI Agent/自动化流程编写或重构提示词
- 排查提示执行失误、漏检或“走样”问题
- 建立标准化提示模板、评分体系与持续改进机制

### 快速用法
```bash
cat prompts/review.md | /check-prompt
/check-prompt --category structure
/check-prompt --deep --fix
```

可选参数：
- `--category <结构|执行|限制|质量|角色|改进>`：仅检查指定维度。
- `--score`：输出质量评分，不展开分析。
- `--fix`：针对发现的问题给出修订示例。
- `--deep`：深度模式，重点检查歧义、信息分散与执行约束。

### 评估维度
1. **结构与清晰度**（25%）
   - 是否标注优先级（🔴 强制、🟡 重要、🟢 推荐）
   - 避免含糊字眼，例如“尽量”“视情况而定”
   - 相关信息聚合在一起，无循环引用或多处散落
2. **执行可操作性**（20%）
   - 步骤、前置条件、示例是否完整
   - 结果如何验证，是否提供输出模板
   - 是否便于脚本化、自动化集成
3. **限制与例外管理**（15%）
   - 禁止事项全面、影响等级清晰
   - 例外条件有严格边界，避免灰色地带
4. **质量保障机制**（20%）
   - 是否设计追踪、审计、报警机制
   - 模板强制项、自动检查点是否明确
   - 常见错误和恢复步骤是否列出
5. **角色与责任**（10%）
   - AI 与人工的权限、确认节点清晰
   - 分类标准唯一、互斥并附使用示例
6. **持续改进**（10%）
   - 是否收集日志、失败案例并反馈
   - 是否定义自动检测新模式、跟踪效果

### 输出结构
```
Prompt 质量评估
━━━━━━━━━━━━━━━━━━━━━━
总体评分：XX / 100
主要问题：
1. 标题（所属维度，严重度）
   - 发现：...
   - 影响：...
   - 建议：...

改进示例
- 原文：...
- 建议写法：...
```

### 常见致命问题
- 使用“尽量”“适当”“自己判断”等模糊表达 → 必须改为刚性指令
- 例外条件未量化（如“特殊情况下”）→ 需列出具体触发条件
- 关键信息散落在多个章节 → 应汇总到执行清单/表格
- 无验证/追踪机制 → 应提供记录方式和审计要求

### 与 Claude 协作
- 将完整 prompt 贴给 Claude，请其按 6 大维度评分并定位问题。
- 结合 `--fix` 选项获取改写示例，再手动确认是否符合业务语境。
- 对于 Agent 工作流，可要求 Claude 输出执行检查表或自动化脚本模板。

### 使用建议
- 初稿完成后先运行 `/check-prompt --score` 获得快速评分，再针对薄弱维度深挖。
- 对于关键系统的 prompt，建议建立版本管理、评审与回归测试流程。
- 检查结果无法量化时，可请 Claude 指出需要补充的数据或成功判据。
