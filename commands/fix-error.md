---
name: fix-error
description: "根据错误日志定位根因，给出修复方案和预防措施"
---

# Fix Error 命令

智能错误诊断和修复建议：

**诊断流程**：
1. **错误分析** - 解析日志、堆栈和异常信息
2. **根因定位** - 识别配置、依赖、环境问题
3. **修复方案** - 提供分步骤的解决办法
4. **预防措施** - 避免同类问题再次发生

**支持模式**：
- `--deep` - 深度环境和依赖分析
- `--quick` - 快速高概率修复方案

**适用场景**：
- 构建、测试、运行时错误
- 复杂堆栈和性能告警
- 环境配置问题排查
- `--preventive`：强调预防措施和长期改进。

### 建议信息收集
- 必填：完整错误信息、堆栈、复现步骤。
- 建议：环境信息（系统、版本、依赖）、最近代码变更、相关日志。
- 可选：系统资源、网络状况、外部服务状态。

### 输出结构
```
错误分析报告
━━━━━━━━━━━━━━━━━━━━━━
错误概览
- 类型 / 严重度 / 影响范围 / 可复现性

根因定位
- 直接原因：...
- 背景因素：...
- 触发条件：...

修复建议
🔴 立即处理：...
🟡 根因修复：...
🟢 预防措施：...

验证步骤
1. ...
2. ...
```

### 常见问题优先级
- 🔴 立即解决：服务不可用、数据丢失风险、安全漏洞、生产事故。
- 🟡 尽快修复：性能退化、部分功能失效、构建/测试阻塞。
- 🟢 计划治理：警告、技术债、潜在兼容性问题。

### 与 Claude 协作
- 先提供日志或最小复现脚本，再请求分析，可提升准确率。
- 可要求 Claude 给出排查 checklist、调试命令或临时绕过方案。
- 分析完成后结合 `/task`、`/plan` 跟踪修复与复盘。

### 注意事项
- 修复前评估影响范围，必要时准备回滚或隔离措施。
- 日志可能包含敏感数据，请先脱敏。
- 若错误涉及外部服务/依赖，需同步相关团队确认。
